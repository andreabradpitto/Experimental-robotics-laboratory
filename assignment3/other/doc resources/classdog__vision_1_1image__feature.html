<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Experimental robotics laboratory - Assignment 3: dog_vision.image_feature Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="dog.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Experimental robotics laboratory - Assignment 3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedog__vision.html">dog_vision</a></li><li class="navelem"><a class="el" href="classdog__vision_1_1image__feature.html">image_feature</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classdog__vision_1_1image__feature-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dog_vision.image_feature Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class used to visualize what the the robotic dog see during motion.  
 <a href="classdog__vision_1_1image__feature.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88a2b586cfb7fa05e73cc135694042bb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#a88a2b586cfb7fa05e73cc135694042bb">__init__</a> (self)</td></tr>
<tr class="memdesc:a88a2b586cfb7fa05e73cc135694042bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class initialization: subscribe to topics and declare publishers.  <a href="classdog__vision_1_1image__feature.html#a88a2b586cfb7fa05e73cc135694042bb">More...</a><br /></td></tr>
<tr class="separator:a88a2b586cfb7fa05e73cc135694042bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf538854cf26ef9221d361b942a3458"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#afcf538854cf26ef9221d361b942a3458">computeCount</a> (self, hsv, colorLower, colorUpper)</td></tr>
<tr class="memdesc:afcf538854cf26ef9221d361b942a3458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to compute the amount of image contours comprised inside a specific color's bounds.  <a href="classdog__vision_1_1image__feature.html#afcf538854cf26ef9221d361b942a3458">More...</a><br /></td></tr>
<tr class="separator:afcf538854cf26ef9221d361b942a3458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9008d290a0eac813fe0f871d08d87b56"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#a9008d290a0eac813fe0f871d08d87b56">callback</a> (self, ros_data)</td></tr>
<tr class="memdesc:a9008d290a0eac813fe0f871d08d87b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback of the subscribed topic, used to constantly show on screen what the robotic dog is seeing.  <a href="classdog__vision_1_1image__feature.html#a9008d290a0eac813fe0f871d08d87b56">More...</a><br /></td></tr>
<tr class="separator:a9008d290a0eac813fe0f871d08d87b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4bb1d2335b5c0c6f96e876e328067945"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#a4bb1d2335b5c0c6f96e876e328067945">image_pub</a></td></tr>
<tr class="memdesc:a4bb1d2335b5c0c6f96e876e328067945"><td class="mdescLeft">&#160;</td><td class="mdescRight">topic over which camera images get published  <a href="classdog__vision_1_1image__feature.html#a4bb1d2335b5c0c6f96e876e328067945">More...</a><br /></td></tr>
<tr class="separator:a4bb1d2335b5c0c6f96e876e328067945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839db294863bcceb9e9121b96ae6ab91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#a839db294863bcceb9e9121b96ae6ab91">vel_pub</a></td></tr>
<tr class="memdesc:a839db294863bcceb9e9121b96ae6ab91"><td class="mdescLeft">&#160;</td><td class="mdescRight">topic used to publish robot velocity commands  <a href="classdog__vision_1_1image__feature.html#a839db294863bcceb9e9121b96ae6ab91">More...</a><br /></td></tr>
<tr class="separator:a839db294863bcceb9e9121b96ae6ab91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa9c0650a430ec2302c3f1ad4d77d81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdog__vision_1_1image__feature.html#acaa9c0650a430ec2302c3f1ad4d77d81">subscriber</a></td></tr>
<tr class="memdesc:acaa9c0650a430ec2302c3f1ad4d77d81"><td class="mdescLeft">&#160;</td><td class="mdescRight">subscribed topic, used to check if balls are present nearby  <a href="classdog__vision_1_1image__feature.html#acaa9c0650a430ec2302c3f1ad4d77d81">More...</a><br /></td></tr>
<tr class="separator:acaa9c0650a430ec2302c3f1ad4d77d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class used to visualize what the the robotic dog see during motion. </p>
<p>It uses OpenCV in order to acquire images of the house, and takes control of the robot movements as soon as a new ball is spotted, with the aim of getting near it and storing the location for later reference </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00082">82</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a88a2b586cfb7fa05e73cc135694042bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a2b586cfb7fa05e73cc135694042bb">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def dog_vision.image_feature.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Class initialization: subscribe to topics and declare publishers. </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00085">85</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9008d290a0eac813fe0f871d08d87b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9008d290a0eac813fe0f871d08d87b56">&#9670;&nbsp;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def dog_vision.image_feature.callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ros_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback of the subscribed topic, used to constantly show on screen what the robotic dog is seeing. </p>
<p>This callback also performs image conversion and feature detection. It has a different algorithm depending on the robotic dog current state. When the robot is in the Sleep or Play state, this callback just provides visual feedback on screen about what the robot is currently seeing. With this choice, the robot's Play state actually prioritizes the current human request over any possible new ball detection, i.e. they are ignored. When the robot is in Normal state, this callback does nothing if no balls are detected. If this is not the case, the robot checks if that ball is present in its database and, if so, it ignores it. If the ball preceived is a new discovery, the callback cancels all current move_base goals through an action client, and takes control of the dog motion: it leads the robot close to the ball, and then stores its coordinates. While this process is being carried out, the code draws both a colored dot centered on the ball and a circle outlining the latter; the callback also locks the triggering of new ball discovery processes, and frees them only once it is completed. The callback behavior for the Find state is similar to the one of the Normal state, but this time the goal cancelling is sent to the explore_lite algorithm via a service client. The code also checks if the ball found and reached was actually the wanted one: if so, the finding process is over, otherwise the callback restarts the explore_lite algorithm, with another service client, in order to find another new ball. The two service clients used to communicate with the Explore class (which hosts the exploration algorithm) rely on as many service servers, that I added as methods of the original code </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00134">134</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<a id="afcf538854cf26ef9221d361b942a3458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf538854cf26ef9221d361b942a3458">&#9670;&nbsp;</a></span>computeCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def dog_vision.image_feature.computeCount </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hsv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>colorLower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>colorUpper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to compute the amount of image contours comprised inside a specific color's bounds. </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00101">101</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4bb1d2335b5c0c6f96e876e328067945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bb1d2335b5c0c6f96e876e328067945">&#9670;&nbsp;</a></span>image_pub</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dog_vision.image_feature.image_pub</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>topic over which camera images get published </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00089">89</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<a id="acaa9c0650a430ec2302c3f1ad4d77d81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa9c0650a430ec2302c3f1ad4d77d81">&#9670;&nbsp;</a></span>subscriber</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dog_vision.image_feature.subscriber</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>subscribed topic, used to check if balls are present nearby </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00096">96</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<a id="a839db294863bcceb9e9121b96ae6ab91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839db294863bcceb9e9121b96ae6ab91">&#9670;&nbsp;</a></span>vel_pub</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dog_vision.image_feature.vel_pub</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>topic used to publish robot velocity commands </p>

<p class="definition">Definition at line <a class="el" href="dog__vision_8py_source.html#l00092">92</a> of file <a class="el" href="dog__vision_8py_source.html">dog_vision.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>scripts/<a class="el" href="dog__vision_8py_source.html">dog_vision.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
